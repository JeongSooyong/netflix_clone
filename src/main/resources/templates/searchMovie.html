<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Netflix Search Results</title>
    <link rel="stylesheet" href="/css/main.css">
    <!-- 필요한 다른 CSS 파일도 포함 -->
</head>

<body class="main-body">
    <header class="navbar">
        <div class="search-bar">
            <!-- 검색 폼은 그대로 유지 -->
            <form th:action="@{/searchMovie}" method="get">
                <input type="text" name="keyword" placeholder="영화 제목을 검색하세요..." th:value="${keyword}">
                <button type="submit">검색</button>
            </form>
        </div>
        <div class="logo">NETFLIX</div>
        <nav>
            <a href="/main">홈</a> <!-- 홈으로 가는 링크는 /main으로 변경 -->
            <a href="#">시리즈</a>
            <a href="#">영화</a>
            <a href="#">내가 찜한 콘텐츠</a>
        </nav>
        <div class="profile">
            <a th:if="${loginUser != null and loginUser.commonNo == 104}" href="/insertMovie" class="admin-button">영화 등록</a>
            <a href="/myinfo">내 정보</a>
            <a href="/logout">로그아웃</a>
        </div>
    </header>

    <section class="hero">
        <div class="hero-content">
            <h1>검색 결과</h1>
            <p th:text="${searchMessage}"></p> <!-- 검색 메시지 표시 -->
            <button onclick="location.href='/main'">메인으로 돌아가기</button> <!-- 메인 페이지로 돌아가는 버튼 -->
        </div>
    </section>

    <!-- 검색 결과를 보여줄 섹션 -->
    <section class="row">
        <div class="row-posters">
            <!-- 컨트롤러에서 넘겨받은 'movies' 리스트를 반복하여 출력 -->
            <div th:each="movie : ${movies}" class="movie-item">
                <a th:href="@{/selectMovie/{movieTitle}(movieTitle=${movie.movieTitle})}">
                    <img th:src="@{/img/{filename}(filename=${movie.moviePoster})}" th:alt="${movie.movieTitle}" class="row-poster">
                    <p class="movie-title" th:text="${movie.movieTitle}"></p>
                </a>
            </div>
            <!-- 검색 결과가 아예 없을 때 메시지 -->
            <div th:if="${movies.isEmpty()}" class="no-results">
                <p>표시할 영화가 없습니다.</p>
            </div>
        </div>
    </section>

    <!-- 푸터 등 필요한 다른 내용 -->
</body>
</html>