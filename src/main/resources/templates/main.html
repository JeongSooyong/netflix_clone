<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Netflix Main</title>
    <link rel="stylesheet" href="/css/main.css">
</head>

<body class="main-body">
    <header class="navbar">
        <div class="search-bar">
            <form th:action="@{/searchMovie}" method="get">
                <input type="text" name="keyword" placeholder="영화 제목을 검색하세요..." th:value="${keyword}">
                <button type="submit">검색</button>
            </form>
        </div>
        <nav>
            <a href="#">홈</a>
            <a href="#">시리즈</a>
            <a href="#">영화</a>
            <a href="#">내가 찜한 콘텐츠</a>
        </nav>
        <div class="profile">
            <a th:if="${loginUser != null and loginUser.commonNo == 104}" href="/insertMovie" class="admin-button">영화
                등록</a>
            <a th:if="${loginUser != null and loginUser.commonNo == 104}" href="/insertActor" class="admin-button">배우
                등록</a>
            <a href="/myinfo">내 정보</a>
            <a href="/logout">로그아웃</a>
        </div>
    </header>
    <section class="hero">  <!-- th:style 속성 제거 -->
        <div class="hero-content">
            <th:block th:if="${latestWatchedMovie != null}">
                <h1 th:text="${latestWatchedMovie.movieTitle}">최근 시청 영화 제목</h1>
                <p th:text="${latestWatchedMovie.movieDescrip}"></p> <!-- movieDescrip 또는 movieDescr 확인 필요 -->
                <button th:onclick="'location.href=\'' + @{/selectMovie/{movieNo}(movieNo=${latestWatchedMovie.movieNo})} + '\''">다시 재생</button>
                <button>내가 찜한 콘텐츠</button>
            </th:block>
            <th:block th:unless="${latestWatchedMovie != null}">
                <h1>대표 영화/시리즈 제목</h1>
                <p>이곳에 간단한 설명이 들어갑니다.</p>
                <button>재생</button>
                <button>내가 찜한 콘텐츠</button>
            </th:block>
        </div>
    </section>
    <section class="row">
        <h2>지금 뜨는 콘텐츠</h2>
        <div class="row-posters" id="movieListContainer">
            <!-- Thymeleaf의 th:each를 사용하여 movies 리스트 반복 -->
            <div th:each="movie : ${movies}" class="movie-item">
                <img th:src="@{/img/{filename}(filename=${movie.moviePoster})}" th:alt="${movie.movieTitle}"
                    class="row-poster">
                <p class="movie-title" th:text="${movie.movieTitle}"></p>
            </div>
        </div>
        <h2>로맨스</h2>
        <div class="row-posters">
            <!-- Thymeleaf의 th:each를 사용하여 movies 리스트 반복 -->
            <div th:each="movie : ${movies}" th:if="${movie.movieGenre == 1}" class="movie-item">
                <a th:href="@{/selectMovie/{movieNo}(movieNo=${movie.movieNo})}">
                    <img th:src="@{/img/{filename}(filename=${movie.moviePoster})}" th:alt="${movie.movieTitle}"
                        class="row-poster">
                    <p class="movie-title" th:text="${movie.movieTitle}"></p>
                </a>
            </div>
        </div>
        <h2>액션</h2>
        <div class="row-posters">
            <!-- Thymeleaf의 th:each를 사용하여 movies 리스트 반복 -->
            <div th:each="movie : ${movies}" th:if="${movie.movieGenre == 2}" class="movie-item">
                <a th:href="@{/selectMovie/{movieNo}(movieNo=${movie.movieNo})}">
                    <img th:src="@{/img/{filename}(filename=${movie.moviePoster})}" th:alt="${movie.movieTitle}"
                        class="row-poster">
                    <p class="movie-title" th:text="${movie.movieTitle}"></p>
                </a>
            </div>
        </div>
        <h2>만화 애니메이션</h2>
        <div class="row-posters">
            <!-- Thymeleaf의 th:each를 사용하여 movies 리스트 반복 -->
            <div th:each="movie : ${movies}" th:if="${movie.movieGenre == 3}" class="movie-item">
                <a th:href="@{/selectMovie/{movieNo}(movieNo=${movie.movieNo})}">
                    <img th:src="@{/img/{filename}(filename=${movie.moviePoster})}" th:alt="${movie.movieTitle}"
                        class="row-poster">
                    <p class="movie-title" th:text="${movie.movieTitle}"></p>
                </a>
            </div>
        </div>
        <h2>코미디</h2>
        <div class="row-posters">
            <!-- Thymeleaf의 th:each를 사용하여 movies 리스트 반복 -->
            <div th:each="movie : ${movies}" th:if="${movie.movieGenre == 4}" class="movie-item">
                <a th:href="@{/selectMovie/{movieNo}(movieNo=${movie.movieNo})}">
                    <img th:src="@{/img/{filename}(filename=${movie.moviePoster})}" th:alt="${movie.movieTitle}"
                        class="row-poster">
                    <p class="movie-title" th:text="${movie.movieTitle}"></p>
                </a>
            </div>
        </div>
        <h2>범죄</h2>
        <div class="row-posters">
            <!-- Thymeleaf의 th:each를 사용하여 movies 리스트 반복 -->
            <div th:each="movie : ${movies}" th:if="${movie.movieGenre == 5}" class="movie-item">
                <a th:href="@{/selectMovie/{movieNo}(movieNo=${movie.movieNo})}">
                    <img th:src="@{/img/{filename}(filename=${movie.moviePoster})}" th:alt="${movie.movieTitle}"
                        class="row-poster">
                    <p class="movie-title" th:text="${movie.movieTitle}"></p>
                </a>
            </div>
        </div>
        <h2>스릴러</h2>
        <div class="row-posters">
            <!-- Thymeleaf의 th:each를 사용하여 movies 리스트 반복 -->
            <div th:each="movie : ${movies}" th:if="${movie.movieGenre == 6}" class="movie-item">
                <a th:href="@{/selectMovie/{movieNo}(movieNo=${movie.movieNo})}">
                    <img th:src="@{/img/{filename}(filename=${movie.moviePoster})}" th:alt="${movie.movieTitle}"
                        class="row-poster">
                    <p class="movie-title" th:text="${movie.movieTitle}"></p>
                </a>
            </div>
        </div>
        <h2>공포</h2>
        <div class="row-posters">
            <!-- Thymeleaf의 th:each를 사용하여 movies 리스트 반복 -->
            <div th:each="movie : ${movies}" th:if="${movie.movieGenre == 7}" class="movie-item">
                <a th:href="@{/selectMovie/{movieNo}(movieNo=${movie.movieNo})}">
                    <img th:src="@{/img/{filename}(filename=${movie.moviePoster})}" th:alt="${movie.movieTitle}"
                        class="row-poster">
                    <p class="movie-title" th:text="${movie.movieTitle}"></p>
                </a>
            </div>
        </div>
        <h2>드라마</h2>
        <div class="row-posters">
            <!-- Thymeleaf의 th:each를 사용하여 movies 리스트 반복 -->
            <div th:each="movie : ${movies}" th:if="${movie.movieGenre == 8}" class="movie-item">
                <a th:href="@{/selectMovie/{movieNo}(movieNo=${movie.movieNo})}">
                    <img th:src="@{/img/{filename}(filename=${movie.moviePoster})}" th:alt="${movie.movieTitle}"
                        class="row-poster">
                    <p class="movie-title" th:text="${movie.movieTitle}"></p>
                </a>
            </div>
        </div>
    </section>
</body>

</html>